{
    "id": "opensees-docker",
    "version": "3.6",
    "description": "A reference application for running OpenSees Express in Tapis v3.",
    "owner": "ds_admin",
    "runtime": "DOCKER",
    "containerImage": "stevemock/docker-opensees:latest",
    "jobAttributes": {
        "description": "",
        "execSystemExecDir": "${JobWorkingDir}/jobs/${JobUUID}",
        "execSystemInputDir": "${JobWorkingDir}/jobs/${JobUUID}/data",
        "execSystemOutputDir": "${JobWorkingDir}/jobs/${JobUUID}/output",
        "parameterSet": {
            "appArgs": [
                {
                    "name": "mainProgram",
                    "arg": "OpenSees"
                },
                {
                    "name": "input1",
                    "arg": "/TapisInput/input.tcl"
                }
            ],
            "containerArgs": [],
            "schedulerOptions":[
                {
                    "name": "TACC Scheduler Profile",
                    "description": "Scheduler profile for HPC clusters at TACC",
                    "inputMode": "FIXED",
                    "arg": "--tapis-profile opensees-v3.6",
                    "notes": {
                        "isHidden": true
                    }
                },
                {
                    "name": "Slurm job name",
                    "description": "Set the slurm job name to be identical to the Tapis job name.",
                    "inputMode": "FIXED",
                    "arg": "--job-name ${JobName}",
                    "notes": {
                        "isHidden": true
                    }
                }
            ],
            "envVariables": [
                {
                    "key":"inputScript",
                    "value":"freeFieldEffective.tcl",
                    "description":"The filename only of the OpenSees TCL script to execute. This file should reside in the Input Directory specified. To try this out copy and paste in 'freeFieldEffective.tcl'.",
                    "inputMode":"REQUIRED",
                    "notes": {
                        "label": "TCL Script",
                        "validator": "([^\\s]+(\\.(?i)(tcl))$)"
                    }
                }
            ]
        },
        "fileInputs": [
            {
                "name": "Input Directory",
                "description": "The directory containing your OpenSees input files as well as your OpenSees TCL script. You can drag the link for the directory from the Data Browser on the left, or click the 'Select Input' button and then select the directory. To try out sample data copy and paste 'agave://designsafe.storage.community//app_examples/opensees/FreefieldAnalysisEffective/'above.",
                "inputMode": "REQUIRED",
                "sourceUrl": null,
                "targetPath": "inputDirectory"
            }
        ],
        "nodeCount": 1,
        "coresPerNode": 56,
        "memoryMB": 192,
        "maxMinutes": 120,
        "subscriptions": [],
        "tags": []
    },
    "tags": [
        "portalName: DesignSafe"
    ],
    "notes": {
        "icon": "OpenSees",
        "label": "OpenSees-EXPRESS (V 3.6)",
        "helpURI": "https://www.designsafe-ci.org/rw/user-guide/workspace/opensees/",
        "hideNodeCountAndCoresPerNode": "SERIAL",
        "category": "Simulation"
    }
}
