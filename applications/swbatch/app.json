{
    "id": "swbatch",
    "version": "0.4.1",
    "description": "swbatch v0.4.1 executes on a single node of the Frontera cluster. swbatch v0.4.1 uses geopsy v3.4.2 as its inversion engine, therefore all .target and .param inversion input files must be created with a compatible version of geopsy. The best way to ensure compatible input files is to use the example inversion workflow provided with the latest version of the open-source Python package swprepost.",
    "owner": "${apiUserId}",
    "runtime": "ZIP",
    "runtimeVersion": null,
    "runtimeOptions": null,
    "containerImage": "tapis://cloud.data/corral/tacc/aci/CEP/applications/v3/swbatch/swbatch.zip",
    "jobType": "BATCH",
    "maxJobs": -1,
    "maxJobsPerUser": -1,
    "strictFileInputs": true,
    "jobAttributes": {
        "description": "",
        "dynamicExecSystem": false,
        "execSystemConstraints": null,
        "execSystemId": "frontera",
        "execSystemExecDir": "${JobWorkingDir}",
        "execSystemInputDir": "${JobWorkingDir}",
        "execSystemOutputDir": "${JobWorkingDir}/output",
        "execSystemLogicalQueue": "small",
        "archiveSystemId": "cloud.data",
        "archiveSystemDir": "HOST_EVAL($HOME)/tapis-jobs-archive/${JobCreateDate}/${JobName}-${JobUUID}",
        "archiveOnAppError": true,
        "isMpi": false,
        "mpiCmd": null,
        "cmdPrefix": null,
        "parameterSet": {
            "appArgs": [],
            "containerArgs": [],
            "schedulerOptions": [
              {
                "name": "TACC Scheduler Profile",
                "description": "Scheduler profile for swbatch",
                "inputMode": "FIXED",
                "arg": "--tapis-profile swbatch",
                "notes": {
                    "isHidden": true
                }
              },
              {
                "name": "TACC Interactive Session Substrings",
                "description": "VNC and DCV sessions require the substrings 'tap_' and '-dcvserver' in the slurm job name in order to function.",
                "inputMode": "FIXED",
                "arg": "--job-name ${JobName}-dcvserver-tap_",
                "notes": {
                    "isHidden": true
                }
              }
            ],
            "envVariables": [
              {
                "key": "Analysis name",
                "value": "",
                "description": "Analysis name that is brief, memorable, and descriptive. Each output file will begin with this string of characters. No spaces or special characters are permitted.",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "name"
                }
              },
              {
                "key": "Number of inversion trials",
                "value": "3",
                "description": "Number (positive integer) of inversion trials to perform per parameterization. (3 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "ntrial"
                }
              },
              {
                "key": "Number of initial random models",
                "value": "10000",
                "description": "Number (positive integer) of randomly sampled models to attempt before the first Neighborhood-Algorithm iteration. (10000 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "ns0"
                }
              },
              {
                "key": "Number of Neighborhood models",
                "value": "50000",
                "description": "Number (positive integer) of Neighborhood-Algorithm-selected models to consider per inversion. (50000 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "ns"
                }
              },
              {
                "key": "Number of best models to consider when resampling",
                "value": "100",
                "description": "Number (positive integer) of best models to consider when resampling. (100 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "nr"
                }
              },
              {
                "key": "Number of ground models/dispersion curves/ellipticity curves to export",
                "value": "100",
                "description": "Number (positive integer) of ground models/dispersion curves/ellipticity curves to export. (100 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "nmodels"
                }
              },
              {
                "key": "Number of Rayleigh wave modes to export",
                "value": "1",
                "description": "Number (positive integer) of Rayleigh wave modes to export. If no dispersion curves are desired set both the number of Rayleigh and Love modes to 0. (1 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "nrayleigh"
                }
              },
              {
                "key": "Number of Love wave modes to export",
                "value": "1",
                "description": "Number (positive integer) of Love wave modes to export. If no dispersion curves are desired set both the number of Rayleigh and Love modes to 0. (1 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "nlove"
                }
              },
              {
                "key": "Minimum frequency of exported dispersion curve(s) in Hz",
                "value": "",
                "description": "Number (positive float) for minimum frequency of exported dispersion curve(s) in Hz. Selecting a value slightly less than the minimum frequency of your experimental dispersion data is recommended.",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "dcfmin"
                }
              },
              {
                "key": "Maximum frequency of exported dispersion curve(s) in Hz",
                "value": "",
                "description": "Number (positive float) for maximum frequency of exported dispersion curve(s) in Hz. Selecting a value slightly larger than the maximum frequency of your experimental dispersion data is recommended.",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "dcfmax"
                }
              },
              {
                "key": "Number of frequency points in exported dispersion curve(s)",
                "value": "30",
                "description": "Number (positive integer) of frequency points in the exported dispersion curve(s). (30 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "dcfnum"
                }
              },
              {
                "key": "Number of Rayleigh modes to include in exported ellipticity",
                "value": "1",
                "description": "Number (positive integer) of Rayleigh modes to include in exported ellipticity. If no ellipticity curves are desired set this value to 0. (1 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "nellipticity"
                }
              },
              {
                "key": "Minimum frequency of exported Rayleigh wave ellipticity in Hz",
                "value": "",
                "description": "Number (positive float) for minimum frequency of exported Rayleigh wave ellipticity curve(s) in Hz. Selecting a value less than the site's resonant frequency is recommended.",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "ellfmin"
                }
              },
              {
                "key": "Maximum frequency of exported Rayleigh wave ellipticity in Hz",
                "value": "",
                "description": "Number (positive float) for maximum frequency of exported Rayleigh wave ellipticity curve(s) in Hz. Selecting a value greater than the site's resonant frequency is recommended.",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "ellfmax"
                }
              },
              {
                "key": "Number of frequency points in exported Rayleigh wave ellipticity curve(s)",
                "value": "64",
                "description": "Number (positive integer) of frequency points in exported Rayleigh wave ellipticity curve(s). (64 is recommended)",
                "inputMode": "REQUIRED",
                "notes": {
                  "label": "ellfnum"
                }
              }
            ]        
        },
        "fileInputs": [
            {
                "name": "Working Directory",
                "description": "The directory containing the target (i.e., 0_targets) and parameter (i.e., 1_parameters) directories, see documentation for details. If using the portal interface (i.e., not using Jupyter) you can drag the link for the directory from the Data Depot Browser on the left, or click the 'Select' button to select the desired directory.",                
                "inputMode": "REQUIRED",
                "autoMountLocal": true,
                "sourceUrl": null,
                "targetPath": "workingDirectory"
            }
        ],
        "fileInputArrays": [],
        "nodeCount": 1,
        "coresPerNode": 56,
        "memoryMB": 1,
        "maxMinutes": 120,
        "subscriptions": [],
        "tags": []
    },
    "tags": [
        "portalName: DesignSafe"
    ],
    "notes": {
        "icon": "swbatch",
        "label": "swbatch",
        "helpUrl": "https://github.com/jpvantassel/swbatch",
        "hideNodeCountAndCoresPerNode": false,
        "category": "Hazard Apps",
        "isInteractive": true
    }
}
